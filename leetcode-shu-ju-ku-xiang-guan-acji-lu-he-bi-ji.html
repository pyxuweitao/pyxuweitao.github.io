<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Leetcode 数据库相关AC记录和笔记 - 肉包子打狗</title>
        <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
	<link rel="bookmark" type="image/x-icon" href="/bookmark.png">
        <link rel="stylesheet" href="/theme/css/bootstrap.min.css" type="text/css" />
        <link rel="stylesheet" href="/theme/font-icons/style.min.css" type="text/css" />
        <link rel="stylesheet" href="/theme/css/niu2.min.css" type="text/css" />
        <link rel="canonical" href="/leetcode-shu-ju-ku-xiang-guan-acji-lu-he-bi-ji.html" />
        <link href='https://fonts.lug.ustc.edu.cn/css?family=Timmana|Kanit|Varela' rel='stylesheet' type='text/css'>
        <link href="/theme/css/pagination.min.css" rel='stylesheet' type='text/css'>
        <script type="text/javascript">window.onload=function(){};</script>
        <!--[if lt IE 9]>
            <script src="/theme/js/html5shiv.js"></script>
            <script src="/theme/js/respond.min.js"></script>
        <![endif]-->

        <script src="/theme/js/pagination.min.js"></script>
    </head>
    <body> 
        <div id="body-header">
            <div class="navbar navbar-default navbar-fixed-top">
                <div class="col-md-8 col-md-offset-2">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" style="padding-left:0" href="/">
                            <i class="icon-home"></i>肉包子打狗
                        </a>
                    </div>
                    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
                        <ul class="nav navbar-nav">
                            <li><a href="/about.html" target="_blank" title="about">
                                <i class="icon-evil"></i>关于我</a>
                            </li>
                            <li><a href="/archives.html" title="archives">
                                <i class="icon-drawer"></i>全部</a>
                            </li>
                            <li><a href="/tags.html" title="tags">
                                <i class="icon-price-tags"></i>标签</a>
                            </li>
                            <li><a href="/links.html" title="links">
                                <i class="icon-magnet"></i>友链</a>
                            </li>
                        <!-- category dropdown list -->
                        <li class="dropdown">
                           <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="icon-folder-open"></i>分类<b class="caret"></b>
                           </a>
                           <ul class="dropdown-menu">
                               <li><a href="/category/du-shu-bi-ji.html">
                                   <i class="icon-folder-close"></i>读书笔记
                                      (1)</a></li>
                               <li><a href="/category/fan-yi.html">
                                   <i class="icon-folder-close"></i>翻译
                                      (3)</a></li>
                               <li><a href="/category/oj.html">
                                   <i class="icon-folder-close"></i>OJ
                                      (1)</a></li>
                               <li><a href="/category/qing-dan.html">
                                   <i class="icon-folder-close"></i>清单
                                      (1)</a></li>
                               <li><a href="/category/webbackend.html">
                                   <i class="icon-folder-close"></i>WebBackend
                                      (1)</a></li>
                               <li><a href="/category/zhuang-tai.html">
                                   <i class="icon-folder-close"></i>状态
                                      (1)</a></li>
                           </ul>
                        </li>
                        <!--  self defined dropdown list -->
                        </ul>
                        
                        <!-- right nav bar -->
                        <ul class="nav navbar-nav navbar-right">
                        <!-- google custom search -->
                        <li>
                        <div id="niu2-cse-wrapper">
                            <div id="niu2-cse-header-box" class="navbar-form navbar-nav">
                                <form action="http://google.com/cse">
                                    <input type="hidden" name="cx" value="014853485295879752298:gff7fwfc9r4" />
                                    <input type="hidden" name="ie" value="UTF-8" />
                                    <div class="form-group">
                                        <input id="niu2-cse-search-input" class="niu2-cse-header form-control" 
                                            type="text" name="q" 
                                            placeholder="回车一下，开始搜索"/>
                                    </div>
                                </form>
                           </div>
                           <div id="niu2-cse-ctrl-box" class="navbar-nav">
                            <i id="niu2-cse-search-image" class="icon-search navbar-nav"></i><span id="niu2-cse-search-text">Google站内搜索</span>
                           </div>
                       </div>
                       </li>
                       </ul>
                    </nav>
                </div>
            </div>
        </div>

        <div id="body-content">
            <div class="col-md-8 col-md-offset-2">
                <h1 id="content-heading">Leetcode 数据库相关AC记录和笔记</h1>
            </div>
            <div id="niu2-left-container" class="col-md-6 col-md-offset-2 with-right-border">
                <div id="niu2-main-content">
                    <html><head></head><body><h2 id="176-second-highest-salary">176. Second Highest Salary</h2>
<h3 id="question">Question</h3>
<blockquote>
<p>Write a SQL query to get the second highest salary from the Employee table.</p>
</blockquote>
<div class="codehilite"><pre><span class="o">+----+--------+</span>
<span class="o">|</span> <span class="n">Id</span> <span class="o">|</span> <span class="n">Salary</span> <span class="o">|</span>
<span class="o">+----+--------+</span>
<span class="o">|</span> <span class="mi">1</span>  <span class="o">|</span> <span class="mi">100</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">2</span>  <span class="o">|</span> <span class="mi">200</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">3</span>  <span class="o">|</span> <span class="mi">300</span>    <span class="o">|</span>
<span class="o">+----+--------+</span>
</pre></div>


<blockquote>
<p>For example, given the above Employee table, the second highest salary is <code>200</code>. If there is no second highest salary, then the query should return <code>null</code>.</p>
</blockquote>
<h3 id="answer">Answer</h3>
<div class="codehilite"><pre><span class="c1">#808ms over %93.96</span>
<span class="k">SELECT</span> <span class="nf">MAX</span><span class="p">(</span><span class="n">Salary</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">Employee</span>
<span class="k">WHERE</span> <span class="n">Salary</span> <span class="o">&lt;</span><span class="p">(</span> <span class="k">SELECT</span> <span class="nf">MAX</span><span class="p">(</span><span class="n">Salary</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">Employee</span><span class="p">)</span>
</pre></div>


<hr/>
<h2 id="178-rank-scores">178. Rank Scores</h2>
<h3 id="question_1">Question</h3>
<blockquote>
<p>Write a SQL query to rank scores. If there is a tie between two scores, both should have the same ranking. Note that after a tie, the next ranking number should be the next consecutive integer value. In other words, there should be no "holes" between ranks.</p>
</blockquote>
<div class="codehilite"><pre><span class="o">+----+-------+</span>
<span class="o">|</span> <span class="n">Id</span> <span class="o">|</span> <span class="n">Score</span> <span class="o">|</span>
<span class="o">+----+-------+</span>
<span class="o">|</span> <span class="mi">1</span>  <span class="o">|</span> <span class="mi">3</span><span class="p">.</span><span class="mi">50</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">2</span>  <span class="o">|</span> <span class="mi">3</span><span class="p">.</span><span class="mi">65</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">3</span>  <span class="o">|</span> <span class="mi">4</span><span class="p">.</span><span class="mi">00</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">4</span>  <span class="o">|</span> <span class="mi">3</span><span class="p">.</span><span class="mi">85</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">5</span>  <span class="o">|</span> <span class="mi">4</span><span class="p">.</span><span class="mi">00</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">6</span>  <span class="o">|</span> <span class="mi">3</span><span class="p">.</span><span class="mi">65</span>  <span class="o">|</span>
<span class="o">+----+-------+</span>
</pre></div>


<blockquote>
<p>For example, given the above Scores table, your query should generate the following report (order by highest score):</p>
</blockquote>
<div class="codehilite"><pre><span class="o">+-------+------+</span>
<span class="o">|</span> <span class="n">Score</span> <span class="o">|</span> <span class="n">Rank</span> <span class="o">|</span>
<span class="o">+-------+------+</span>
<span class="o">|</span> <span class="mi">4</span><span class="p">.</span><span class="mi">00</span>  <span class="o">|</span> <span class="mi">1</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">4</span><span class="p">.</span><span class="mi">00</span>  <span class="o">|</span> <span class="mi">1</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">3</span><span class="p">.</span><span class="mi">85</span>  <span class="o">|</span> <span class="mi">2</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">3</span><span class="p">.</span><span class="mi">65</span>  <span class="o">|</span> <span class="mi">3</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">3</span><span class="p">.</span><span class="mi">65</span>  <span class="o">|</span> <span class="mi">3</span>    <span class="o">|</span>
<span class="o">|</span> <span class="mi">3</span><span class="p">.</span><span class="mi">50</span>  <span class="o">|</span> <span class="mi">4</span>    <span class="o">|</span>
<span class="o">+-------+------+</span>
</pre></div>


<h3 id="answer_1">Answer</h3>
<div class="codehilite"><pre><span class="c1"># 1426ms over 12.30%</span>
<span class="k">SELECT</span> <span class="n">a</span><span class="p">.</span><span class="n">Score</span> <span class="n">Score</span><span class="p">,</span>
<span class="p">(</span> <span class="k">SELECT</span> <span class="nf">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">Score</span><span class="p">)</span>
  <span class="k">FROM</span> <span class="n">Scores</span>
  <span class="k">WHERE</span> <span class="n">Score</span> <span class="o">&gt;</span> <span class="n">a</span><span class="p">.</span><span class="n">Score</span> <span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="n">Rank</span>
<span class="k">FROM</span> <span class="n">Scores</span> <span class="n">a</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">Score</span>  <span class="k">DESC</span>
</pre></div>


<hr/>
<blockquote>
<p>Group by 比 DISTINCT 效率高
COUNT DISTINCT 之前先用子查询减负</p>
</blockquote>
<div class="codehilite"><pre><span class="c1"># 932ms over 58.26%</span>
<span class="k">SELECT</span> <span class="n">a</span><span class="p">.</span><span class="n">Score</span> <span class="n">Score</span><span class="p">,(</span>
       <span class="k">SELECT</span> <span class="nf">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
       <span class="k">FROM</span> <span class="p">(</span>
           <span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">Score</span>
           <span class="k">FROM</span> <span class="n">Scores</span> <span class="p">)</span> <span class="n">b</span>
       <span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">Score</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">.</span><span class="n">Score</span><span class="p">)</span> <span class="n">Rank</span>
<span class="k">FROM</span> <span class="n">Scores</span> <span class="n">a</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">Score</span> <span class="k">DESC</span><span class="p">;</span>
</pre></div>


<hr/>
<h2 id="180-consecutive-numbers">180. Consecutive Numbers</h2>
<h3 id="question_1_2">Question</h3>
<blockquote>
<p>Write a SQL query to find all numbers that appear at least three times consecutively.</p>
</blockquote>
<div class="codehilite"><pre><span class="o">+----+-----+</span>
<span class="o">|</span> <span class="n">Id</span> <span class="o">|</span> <span class="n">Num</span> <span class="o">|</span>
<span class="o">+----+-----+</span>
<span class="o">|</span> <span class="mi">1</span>  <span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">2</span>  <span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">3</span>  <span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">4</span>  <span class="o">|</span>  <span class="mi">2</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">5</span>  <span class="o">|</span>  <span class="mi">1</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">6</span>  <span class="o">|</span>  <span class="mi">2</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">7</span>  <span class="o">|</span>  <span class="mi">2</span>  <span class="o">|</span>
<span class="o">+----+-----+</span>
</pre></div>


<blockquote>
<p>For example, given the above Logs table, 1 is the only number that appears consecutively for at least three times.</p>
</blockquote>
<h3 id="answer_1_2">Answer</h3>
<div class="codehilite"><pre><span class="c1">#1668 ms over 39.77%</span>
<span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">Num</span>
<span class="k">FROM</span> <span class="n">Logs</span> <span class="n">a</span> <span class="k">JOIN</span>
<span class="p">(</span> <span class="k">SELECT</span> <span class="n">b</span><span class="p">.</span><span class="n">Id</span><span class="p">,</span> <span class="n">b</span><span class="p">.</span><span class="n">Num</span> <span class="n">bNum</span><span class="p">,</span> <span class="n">c</span><span class="p">.</span><span class="n">Num</span> <span class="n">cNum</span>
  <span class="k">FROM</span> <span class="n">Logs</span> <span class="n">b</span> <span class="k">JOIN</span> <span class="n">Logs</span> <span class="n">c</span>
  <span class="k">ON</span> <span class="n">b</span><span class="p">.</span><span class="n">Id</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">Id</span>  <span class="p">)</span> <span class="n">d</span>
<span class="k">ON</span> <span class="n">d</span><span class="p">.</span><span class="n">Id</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="n">Id</span>
<span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">Num</span> <span class="o">=</span> <span class="n">bNum</span> <span class="k">AND</span> <span class="n">bNum</span> <span class="o">=</span> <span class="n">cNum</span>
</pre></div>


<div class="codehilite"><pre><span class="c1">#1622 ms over 54.78%</span>
<span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">a</span><span class="p">.</span><span class="n">Num</span>
<span class="k">FROM</span> <span class="n">Logs</span> <span class="n">a</span>
    <span class="k">JOIN</span> <span class="n">Logs</span> <span class="n">b</span> <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">Id</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">Id</span>
    <span class="k">JOIN</span> <span class="n">Logs</span> <span class="n">c</span> <span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">Id</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">Id</span>
<span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">Num</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">Num</span> <span class="k">AND</span> <span class="n">b</span><span class="p">.</span><span class="n">Num</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">Num</span>
</pre></div>


<hr/>
<h2 id="182-duplicate-emails">182. Duplicate Emails</h2>
<h3 id="question_1_2_3">Question</h3>
<blockquote>
<p>Write a SQL query to find all duplicate emails in a table named Person.</p>
</blockquote>
<div class="codehilite"><pre><span class="o">+----+---------+</span>
<span class="o">|</span> <span class="n">Id</span> <span class="o">|</span> <span class="n">Email</span>   <span class="o">|</span>
<span class="o">+----+---------+</span>
<span class="o">|</span> <span class="mi">1</span>  <span class="o">|</span> <span class="n">a</span><span class="o">@</span><span class="n">b</span><span class="p">.</span><span class="n">com</span> <span class="o">|</span>
<span class="o">|</span> <span class="mi">2</span>  <span class="o">|</span> <span class="n">c</span><span class="o">@</span><span class="n">d</span><span class="p">.</span><span class="n">com</span> <span class="o">|</span>
<span class="o">|</span> <span class="mi">3</span>  <span class="o">|</span> <span class="n">a</span><span class="o">@</span><span class="n">b</span><span class="p">.</span><span class="n">com</span> <span class="o">|</span>
<span class="o">+----+---------+</span>
</pre></div>


<blockquote>
<p>For example, your query should return the following for the above table:</p>
</blockquote>
<div class="codehilite"><pre><span class="o">+---------+</span>
<span class="o">|</span> <span class="n">Email</span>   <span class="o">|</span>
<span class="o">+---------+</span>
<span class="o">|</span> <span class="n">a</span><span class="o">@</span><span class="n">b</span><span class="p">.</span><span class="n">com</span> <span class="o">|</span>
<span class="o">+---------+</span>
</pre></div>


<blockquote>
<p>Note: All emails are in lowercase.</p>
</blockquote>
<h3 id="answer_1_2_3">Answer</h3>
<div class="codehilite"><pre><span class="c1"># 1120 ms</span>
<span class="k">SELECT</span> <span class="k">DISTINCT</span><span class="p">(</span><span class="n">A</span><span class="p">.</span><span class="n">Email</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">Person</span> <span class="n">A</span> <span class="k">JOIN</span> <span class="n">Person</span> <span class="n">B</span> <span class="k">ON</span> <span class="n">A</span><span class="p">.</span><span class="n">EMAIL</span> <span class="o">=</span> <span class="n">B</span><span class="p">.</span><span class="n">EMAIL</span> <span class="k">AND</span> <span class="n">A</span><span class="p">.</span><span class="n">ID</span> <span class="o">!=</span> <span class="n">B</span><span class="p">.</span><span class="n">ID</span><span class="p">;</span>
</pre></div>


<div class="codehilite"><pre><span class="c1"># 990 ms</span>
<span class="k">SELECT</span> <span class="n">Email</span>
<span class="k">FROM</span> <span class="n">Person</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">Email</span>
<span class="k">HAVING</span> <span class="nf">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">;</span>
</pre></div>


<hr/>
<h2 id="183-customers-who-never-order">183. Customers Who Never Order</h2>
<h3 id="question_1_2_3_4">Question</h3>
<blockquote>
<p>Suppose that a website contains two tables, the Customers table and the Orders table. Write a SQL query to find all customers who never order anything.</p>
<p>Table: Customers.</p>
</blockquote>
<div class="codehilite"><pre><span class="o">+----+-------+</span>
<span class="o">|</span> <span class="n">Id</span> <span class="o">|</span> <span class="n">Name</span>  <span class="o">|</span>
<span class="o">+----+-------+</span>
<span class="o">|</span> <span class="mi">1</span>  <span class="o">|</span> <span class="n">Joe</span>   <span class="o">|</span>
<span class="o">|</span> <span class="mi">2</span>  <span class="o">|</span> <span class="n">Henry</span> <span class="o">|</span>
<span class="o">|</span> <span class="mi">3</span>  <span class="o">|</span> <span class="n">Sam</span>   <span class="o">|</span>
<span class="o">|</span> <span class="mi">4</span>  <span class="o">|</span> <span class="n">Max</span>   <span class="o">|</span>
<span class="o">+----+-------+</span>
</pre></div>


<blockquote>
<p>Table: Orders.</p>
</blockquote>
<div class="codehilite"><pre><span class="o">+----+------------+</span>
<span class="o">|</span> <span class="n">Id</span> <span class="o">|</span> <span class="n">CustomerId</span> <span class="o">|</span>
<span class="o">+----+------------+</span>
<span class="o">|</span> <span class="mi">1</span>  <span class="o">|</span> <span class="mi">3</span>          <span class="o">|</span>
<span class="o">|</span> <span class="mi">2</span>  <span class="o">|</span> <span class="mi">1</span>          <span class="o">|</span>
<span class="o">+----+------------+</span>
</pre></div>


<blockquote>
<p>Using the above tables as example, return the following:</p>
</blockquote>
<div class="codehilite"><pre><span class="o">+-----------+</span>
<span class="o">|</span> <span class="n">Customers</span> <span class="o">|</span>
<span class="o">+-----------+</span>
<span class="o">|</span> <span class="n">Henry</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">Max</span>       <span class="o">|</span>
<span class="o">+-----------+</span>
</pre></div>


<h3 id="answer_1_2_3_4">Answer</h3>
<div class="codehilite"><pre><span class="c1"># 699ms</span>
<span class="k">SELECT</span> <span class="n">a</span><span class="p">.</span><span class="n">Name</span>
<span class="k">From</span> <span class="n">Customers</span> <span class="n">a</span> <span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">Orders</span> <span class="n">b</span>
<span class="k">ON</span> <span class="n">a</span><span class="p">.</span><span class="n">Id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">CustomerId</span>
<span class="k">WHERE</span> <span class="n">b</span><span class="p">.</span><span class="n">Id</span> <span class="k">is</span> <span class="no">null</span><span class="p">;</span>
</pre></div>


<div class="codehilite"><pre><span class="c1"># 738ms</span>
<span class="k">SELECT</span> <span class="n">a</span><span class="p">.</span><span class="n">Name</span>
<span class="k">From</span> <span class="n">Customers</span> <span class="n">a</span>
<span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">Id</span> <span class="k">not</span> <span class="k">in</span> <span class="p">(</span>
    <span class="k">SELECT</span> <span class="n">CustomerId</span>
    <span class="k">FROM</span> <span class="n">Orders</span><span class="p">);</span>
</pre></div>


<hr/>
<h2 id="196-delete-duplicate-emails">196. Delete Duplicate Emails</h2>
<h3 id="question_1_2_3_4_5">Question</h3>
<blockquote>
<p>Write a SQL query to delete all duplicate email entries in a table named Person, keeping only unique emails based on its smallest Id.</p>
</blockquote>
<div class="codehilite"><pre><span class="o">+----+------------------+</span>
<span class="o">|</span> <span class="n">Id</span> <span class="o">|</span> <span class="n">Email</span>            <span class="o">|</span>
<span class="o">+----+------------------+</span>
<span class="o">|</span> <span class="mi">1</span>  <span class="o">|</span> <span class="n">john</span><span class="o">@</span><span class="n">example</span><span class="p">.</span><span class="n">com</span> <span class="o">|</span>
<span class="o">|</span> <span class="mi">2</span>  <span class="o">|</span> <span class="n">bob</span><span class="o">@</span><span class="n">example</span><span class="p">.</span><span class="n">com</span>  <span class="o">|</span>
<span class="o">|</span> <span class="mi">3</span>  <span class="o">|</span> <span class="n">john</span><span class="o">@</span><span class="n">example</span><span class="p">.</span><span class="n">com</span> <span class="o">|</span>
<span class="o">+----+------------------+</span>
</pre></div>


<blockquote>
<p>Id is the primary key column for this table.
For example, after running your query, the above Person table should have the following rows:</p>
</blockquote>
<div class="codehilite"><pre><span class="o">+----+------------------+</span>
<span class="o">|</span> <span class="n">Id</span> <span class="o">|</span> <span class="n">Email</span>            <span class="o">|</span>
<span class="o">+----+------------------+</span>
<span class="o">|</span> <span class="mi">1</span>  <span class="o">|</span> <span class="n">john</span><span class="o">@</span><span class="n">example</span><span class="p">.</span><span class="n">com</span> <span class="o">|</span>
<span class="o">|</span> <span class="mi">2</span>  <span class="o">|</span> <span class="n">bob</span><span class="o">@</span><span class="n">example</span><span class="p">.</span><span class="n">com</span>  <span class="o">|</span>
<span class="o">+----+------------------+</span>
</pre></div>


<h3 id="answer_1_2_3_4_5">Answer</h3>
<div class="codehilite"><pre><span class="c1">#1039 ms over 83.81%</span>
<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">Person</span>
<span class="k">WHERE</span> <span class="n">Id</span> <span class="k">NOT</span> <span class="k">IN</span><span class="p">(</span>
<span class="k">SELECT</span> <span class="n">id</span> <span class="k">FROM</span>
<span class="p">(</span><span class="k">SELECT</span> <span class="nf">Min</span><span class="p">(</span><span class="n">Id</span><span class="p">)</span> <span class="n">id</span> <span class="k">FROM</span> <span class="n">Person</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">Email</span><span class="p">)</span> <span class="n">A</span> <span class="p">)</span>
</pre></div>


<hr/>
<h2 id="197-rising-temperature">197. Rising Temperature</h2>
<h3 id="question_1_2_3_4_5_6">Question</h3>
<blockquote>
<p>Given a Weather table, write a SQL query to find all dates' Ids with higher temperature compared to its previous (yesterday's) dates.</p>
</blockquote>
<div class="codehilite"><pre><span class="o">+---------+------------+------------------+</span>
<span class="o">|</span> <span class="nf">Id</span><span class="p">(</span><span class="kt">INT</span><span class="p">)</span> <span class="o">|</span> <span class="kt">Date</span><span class="p">(</span><span class="kt">DATE</span><span class="p">)</span> <span class="o">|</span> <span class="nf">Temperature</span><span class="p">(</span><span class="kt">INT</span><span class="p">)</span> <span class="o">|</span>
<span class="o">+---------+------------+------------------+</span>
<span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span> <span class="mi">2015</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">01</span> <span class="o">|</span>               <span class="mi">10</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span> <span class="mi">2015</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">02</span> <span class="o">|</span>               <span class="mi">25</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">3</span> <span class="o">|</span> <span class="mi">2015</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">03</span> <span class="o">|</span>               <span class="mi">20</span> <span class="o">|</span>
<span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span> <span class="mi">2015</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">04</span> <span class="o">|</span>               <span class="mi">30</span> <span class="o">|</span>
<span class="o">+---------+------------+------------------+</span>
</pre></div>


<blockquote>
<p>For example, return the following Ids for the above Weather table:</p>
</blockquote>
<div class="codehilite"><pre><span class="o">+----+</span>
<span class="o">|</span> <span class="n">Id</span> <span class="o">|</span>
<span class="o">+----+</span>
<span class="o">|</span>  <span class="mi">2</span> <span class="o">|</span>
<span class="o">|</span>  <span class="mi">4</span> <span class="o">|</span>
<span class="o">+----+</span>
</pre></div>


<h3 id="answer_1_2_3_4_5_6">Answer</h3>
<div class="codehilite"><pre><span class="c1"># 1634 ms</span>
<span class="k">SELECT</span> <span class="n">a</span><span class="p">.</span><span class="n">Id</span> <span class="k">FROM</span> <span class="n">Weather</span> <span class="n">a</span> <span class="k">WHERE</span> <span class="n">a</span><span class="p">.</span><span class="n">Temperature</span> <span class="o">&gt;</span> <span class="p">(</span>
<span class="k">SELECT</span> <span class="n">b</span><span class="p">.</span><span class="n">Temperature</span> <span class="k">FROM</span> <span class="n">Weather</span> <span class="n">b</span>
<span class="k">WHERE</span> <span class="n">b</span><span class="p">.</span><span class="kt">Date</span> <span class="o">=</span> <span class="n">a</span><span class="p">.</span><span class="kt">Date</span> <span class="o">-</span> <span class="k">interval</span> <span class="mi">1</span> <span class="n">day</span> <span class="p">)</span>
</pre></div>


<hr/>
<h2 id="184-department-highest-salary">184. Department Highest Salary</h2>
<h3 id="question_1_2_3_4_5_6_7">Question</h3>
<blockquote>
<p>The Employee table holds all employees. Every employee has an Id, a salary, and there is also a column for the department Id.</p>
</blockquote>
<div class="codehilite"><pre>+----+-------+--------+--------------+
| Id | Name  | Salary | DepartmentId |
+----+-------+--------+--------------+
| 1  | Joe   | 70000  | 1            |
| 2  | Henry | 80000  | 2            |
| 3  | Sam   | 60000  | 2            |
| 4  | Max   | 90000  | 1            |
+----+-------+--------+--------------+
</pre></div>


<blockquote>
<p>The Department table holds all departments of the company.</p>
</blockquote>
<div class="codehilite"><pre>+----+----------+
| Id | Name     |
+----+----------+
| 1  | IT       |
| 2  | Sales    |
+----+----------+
</pre></div>


<blockquote>
<p>Write a SQL query to find employees who have the highest salary in each of the departments. For the above tables, Max has the highest salary in the IT department and Henry has the highest salary in the Sales department.</p>
</blockquote>
<div class="codehilite"><pre>+------------+----------+--------+
| Department | Employee | Salary |
+------------+----------+--------+
| IT         | Max      | 90000  |
| Sales      | Henry    | 80000  |
+------------+----------+--------+
</pre></div>


<h3 id="answer_1_2_3_4_5_6_7">Answer</h3>
<div class="codehilite"><pre><span class="c1"># 1028 ms over 58.39%</span>
<span class="k">SELECT</span> <span class="n">b</span><span class="p">.</span><span class="ss">`Name`</span> <span class="n">Department</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="ss">`Name`</span> <span class="n">Employee</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">Salary</span> <span class="n">Salary</span>
<span class="k">FROM</span> <span class="p">(</span>
    <span class="k">SELECT</span> <span class="nf">MAX</span><span class="p">(</span><span class="n">c</span><span class="p">.</span><span class="n">Salary</span><span class="p">)</span> <span class="n">Salary</span><span class="p">,</span> <span class="n">d</span><span class="p">.</span><span class="n">Id</span> <span class="n">DepartmentId</span>
    <span class="k">FROM</span> <span class="n">Employee</span> <span class="n">c</span> <span class="k">JOIN</span> <span class="n">Department</span> <span class="n">d</span>
    <span class="k">ON</span> <span class="n">c</span><span class="p">.</span><span class="n">DepartmentId</span> <span class="o">=</span> <span class="n">d</span><span class="p">.</span><span class="n">Id</span>
    <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">d</span><span class="p">.</span><span class="n">Id</span> <span class="p">)</span> <span class="n">TEMP</span><span class="p">,</span> <span class="n">Employee</span> <span class="n">a</span><span class="p">,</span> <span class="n">Department</span> <span class="n">b</span>
<span class="k">WHERE</span> <span class="n">TEMP</span><span class="p">.</span><span class="n">DepartmentId</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">Id</span> <span class="k">AND</span> <span class="n">a</span><span class="p">.</span><span class="n">Salary</span> <span class="o">=</span> <span class="n">TEMP</span><span class="p">.</span><span class="n">Salary</span> <span class="k">AND</span> <span class="n">a</span><span class="p">.</span><span class="n">DepartmentId</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">Id</span>
</pre></div>


<hr/>
<h2 id="262-trips-and-users">262. Trips and Users</h2>
<h3 id="question_1_2_3_4_5_6_7_8">Question</h3>
<blockquote>
<p>The Trips table holds all taxi trips. Each trip has a unique Id, while Client_Id and Driver_Id are both foreign keys to the Users_Id at the Users table. Status is an ENUM type of (‘completed’, ‘cancelled_by_driver’, ‘cancelled_by_client’).</p>
</blockquote>
<div class="codehilite"><pre><span class="o">+----+-----------+-----------+---------+--------------------+----------+</span>
<span class="o">|</span> <span class="n">Id</span> <span class="o">|</span> <span class="n">Client_Id</span> <span class="o">|</span> <span class="n">Driver_Id</span> <span class="o">|</span> <span class="n">City_Id</span> <span class="o">|</span>        <span class="n">Status</span>      <span class="o">|</span><span class="n">Request_at</span><span class="o">|</span>
<span class="o">+----+-----------+-----------+---------+--------------------+----------+</span>
<span class="o">|</span> <span class="mi">1</span>  <span class="o">|</span>     <span class="mi">1</span>     <span class="o">|</span>    <span class="mi">10</span>     <span class="o">|</span>    <span class="mi">1</span>    <span class="o">|</span>     <span class="n">completed</span>      <span class="o">|</span><span class="mi">2013</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">01</span><span class="o">|</span>
<span class="o">|</span> <span class="mi">2</span>  <span class="o">|</span>     <span class="mi">2</span>     <span class="o">|</span>    <span class="mi">11</span>     <span class="o">|</span>    <span class="mi">1</span>    <span class="o">|</span> <span class="n">cancelled_by_driver</span><span class="o">|</span><span class="mi">2013</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">01</span><span class="o">|</span>
<span class="o">|</span> <span class="mi">3</span>  <span class="o">|</span>     <span class="mi">3</span>     <span class="o">|</span>    <span class="mi">12</span>     <span class="o">|</span>    <span class="mi">6</span>    <span class="o">|</span>     <span class="n">completed</span>      <span class="o">|</span><span class="mi">2013</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">01</span><span class="o">|</span>
<span class="o">|</span> <span class="mi">4</span>  <span class="o">|</span>     <span class="mi">4</span>     <span class="o">|</span>    <span class="mi">13</span>     <span class="o">|</span>    <span class="mi">6</span>    <span class="o">|</span> <span class="n">cancelled_by_client</span><span class="o">|</span><span class="mi">2013</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">01</span><span class="o">|</span>
<span class="o">|</span> <span class="mi">5</span>  <span class="o">|</span>     <span class="mi">1</span>     <span class="o">|</span>    <span class="mi">10</span>     <span class="o">|</span>    <span class="mi">1</span>    <span class="o">|</span>     <span class="n">completed</span>      <span class="o">|</span><span class="mi">2013</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">02</span><span class="o">|</span>
<span class="o">|</span> <span class="mi">6</span>  <span class="o">|</span>     <span class="mi">2</span>     <span class="o">|</span>    <span class="mi">11</span>     <span class="o">|</span>    <span class="mi">6</span>    <span class="o">|</span>     <span class="n">completed</span>      <span class="o">|</span><span class="mi">2013</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">02</span><span class="o">|</span>
<span class="o">|</span> <span class="mi">7</span>  <span class="o">|</span>     <span class="mi">3</span>     <span class="o">|</span>    <span class="mi">12</span>     <span class="o">|</span>    <span class="mi">6</span>    <span class="o">|</span>     <span class="n">completed</span>      <span class="o">|</span><span class="mi">2013</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">02</span><span class="o">|</span>
<span class="o">|</span> <span class="mi">8</span>  <span class="o">|</span>     <span class="mi">2</span>     <span class="o">|</span>    <span class="mi">12</span>     <span class="o">|</span>    <span class="mi">12</span>   <span class="o">|</span>     <span class="n">completed</span>      <span class="o">|</span><span class="mi">2013</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">03</span><span class="o">|</span>
<span class="o">|</span> <span class="mi">9</span>  <span class="o">|</span>     <span class="mi">3</span>     <span class="o">|</span>    <span class="mi">10</span>     <span class="o">|</span>    <span class="mi">12</span>   <span class="o">|</span>     <span class="n">completed</span>      <span class="o">|</span><span class="mi">2013</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">03</span><span class="o">|</span>
<span class="o">|</span> <span class="mi">10</span> <span class="o">|</span>     <span class="mi">4</span>     <span class="o">|</span>    <span class="mi">13</span>     <span class="o">|</span>    <span class="mi">12</span>   <span class="o">|</span> <span class="n">cancelled_by_driver</span><span class="o">|</span><span class="mi">2013</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">03</span><span class="o">|</span>
<span class="o">+----+-----------+-----------+---------+--------------------+----------+</span>
</pre></div>


<blockquote>
<p>The Users table holds all users. Each user has an unique Users_Id, and Role is an ENUM type of (‘client’, ‘driver’, ‘partner’).</p>
</blockquote>
<div class="codehilite"><pre><span class="o">+----------+--------+--------+</span>
<span class="o">|</span> <span class="n">Users_Id</span> <span class="o">|</span> <span class="n">Banned</span> <span class="o">|</span>  <span class="n">Role</span>  <span class="o">|</span>
<span class="o">+----------+--------+--------+</span>
<span class="o">|</span>    <span class="mi">1</span>     <span class="o">|</span>   <span class="n">No</span>   <span class="o">|</span> <span class="n">client</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">2</span>     <span class="o">|</span>   <span class="n">Yes</span>  <span class="o">|</span> <span class="n">client</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">3</span>     <span class="o">|</span>   <span class="n">No</span>   <span class="o">|</span> <span class="n">client</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">4</span>     <span class="o">|</span>   <span class="n">No</span>   <span class="o">|</span> <span class="n">client</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">10</span>    <span class="o">|</span>   <span class="n">No</span>   <span class="o">|</span> <span class="n">driver</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">11</span>    <span class="o">|</span>   <span class="n">No</span>   <span class="o">|</span> <span class="n">driver</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">12</span>    <span class="o">|</span>   <span class="n">No</span>   <span class="o">|</span> <span class="n">driver</span> <span class="o">|</span>
<span class="o">|</span>    <span class="mi">13</span>    <span class="o">|</span>   <span class="n">No</span>   <span class="o">|</span> <span class="n">driver</span> <span class="o">|</span>
<span class="o">+----------+--------+--------+</span>
</pre></div>


<blockquote>
<p>Write a SQL query to find the cancellation rate of requests made by unbanned clients between Oct 1, 2013 and Oct 3, 2013. For the above tables, your SQL query should return the following rows with the cancellation rate being rounded to two decimal places.</p>
</blockquote>
<div class="codehilite"><pre><span class="o">+------------+-------------------+</span>
<span class="o">|</span>     <span class="n">Day</span>    <span class="o">|</span> <span class="n">Cancellation</span> <span class="n">Rate</span> <span class="o">|</span>
<span class="o">+------------+-------------------+</span>
<span class="o">|</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">01</span> <span class="o">|</span>       <span class="mi">0</span><span class="p">.</span><span class="mi">33</span>        <span class="o">|</span>
<span class="o">|</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">02</span> <span class="o">|</span>       <span class="mi">0</span><span class="p">.</span><span class="mi">00</span>        <span class="o">|</span>
<span class="o">|</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">03</span> <span class="o">|</span>       <span class="mi">0</span><span class="p">.</span><span class="mi">50</span>        <span class="o">|</span>
<span class="o">+------------+-------------------+</span>
</pre></div>


<h3 id="answer_1_2_3_4_5_6_7_8">Answer</h3>
<div class="codehilite"><pre><span class="c1"># 236 ms over 64.02%</span>
<span class="k">SELECT</span> <span class="n">Request_at</span> <span class="k">AS</span> <span class="n">Day</span><span class="p">,</span>
       <span class="nf">ROUND</span><span class="p">(</span><span class="nf">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">a</span><span class="p">.</span><span class="n">Status</span> <span class="o">&lt;&gt;</span> <span class="s1">'completed'</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="n">END</span><span class="p">)</span><span class="o">/</span><span class="nf">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span> <span class="k">AS</span> <span class="s2">"Cancellation Rate"</span>
<span class="k">FROM</span> <span class="n">Trips</span> <span class="n">a</span><span class="p">,</span> <span class="n">Users</span> <span class="n">b</span>
<span class="k">WHERE</span> <span class="p">(</span><span class="n">Request_at</span> <span class="k">BETWEEN</span> <span class="s1">'2013-10-01'</span> <span class="k">AND</span> <span class="s1">'2013-10-03'</span><span class="p">)</span>
<span class="k">AND</span> <span class="n">a</span><span class="p">.</span><span class="n">Client_Id</span> <span class="o">=</span> <span class="n">b</span><span class="p">.</span><span class="n">Users_Id</span>
<span class="k">AND</span> <span class="n">b</span><span class="p">.</span><span class="n">Banned</span> <span class="o">=</span> <span class="s1">'No'</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">Request_at</span>
</pre></div></body></html>
                </div>
                <div id="content-comments">
                    <!-- 多说评论框 start -->
                    <div class="ds-thread" data-thread-key="/leetcode-shu-ju-ku-xiang-guan-acji-lu-he-bi-ji.html" data-title="Leetcode 数据库相关AC记录和笔记" data-url="/leetcode-shu-ju-ku-xiang-guan-acji-lu-he-bi-ji.html">
                    </div>
                    <!-- 多说评论框 end -->
                    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
                    <script type="text/javascript">
                        var duoshuoQuery = { short_name: 'xuweitao' };
                        (function() {
                            var ds = document.createElement('script');
                            ds.type = 'text/javascript';ds.async = true;
                            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
                            ds.charset = 'UTF-8';
                            (document.getElementsByTagName('head')[0] 
                             || document.getElementsByTagName('body')[0]).appendChild(ds);
                        })();
                    </script>
                    <!-- 多说公共JS代码 end -->
                </div>

            </div>
            <div class="niu2-right-container col-md-2">
                <div id="niu2-sidebar-meta" class="niu2-sidebar">
                    <div class="niu2-sidebar-label"><i class="icon-calendar"></i>发布时间:</div>
                    <div class="niu2-sidebar-value">2016-05-04 15:10</div>
                    <div class="niu2-sidebar-label"><i class="icon-open-folder"></i>分类:</div>
                    <div class="niu2-sidebar-value"><a href="/category/oj.html">OJ</a></div>
                    <div class="niu2-sidebar-label"><i class="icon-tag"></i>标签:</div>
                    <div class="niu2-sidebar-inter-value niu2-sidebar-tag"><a href="/tag/leetcode.html">Leetcode</a><sup>1</sup></div>
                    <div class="niu2-sidebar-inter-value niu2-sidebar-tag"><a href="/tag/database.html">Database</a><sup>1</sup></div>
                </div>

                <div id="niu2-sidebar-toc" class="niu2-sidebar" data-status="closed">
                    <div class="niu2-sidebar-label">
                        <i id="niu2-sidebar-toc-ctrl" class="icon-open-tocs"></i>目录
                    </div>
                    <ul id="niu2-sidebar-toc-list">
                        <li><a href="#content-heading">Leetcode 数据库相关AC记录和笔记</a></li>
                        <li><a href='#176-second-highest-salary'>176. Second Highest Salary</a><ul><li><a href='#question'>Question</a></li><li><a href='#answer'>Answer</a></li></ul></li><li><a href='#178-rank-scores'>178. Rank Scores</a><ul><li><a href='#question_1'>Question</a></li><li><a href='#answer_1'>Answer</a></li></ul></li><li><a href='#180-consecutive-numbers'>180. Consecutive Numbers</a><ul><li><a href='#question_1_2'>Question</a></li><li><a href='#answer_1_2'>Answer</a></li></ul></li><li><a href='#182-duplicate-emails'>182. Duplicate Emails</a><ul><li><a href='#question_1_2_3'>Question</a></li><li><a href='#answer_1_2_3'>Answer</a></li></ul></li><li><a href='#183-customers-who-never-order'>183. Customers Who Never Order</a><ul><li><a href='#question_1_2_3_4'>Question</a></li><li><a href='#answer_1_2_3_4'>Answer</a></li></ul></li><li><a href='#196-delete-duplicate-emails'>196. Delete Duplicate Emails</a><ul><li><a href='#question_1_2_3_4_5'>Question</a></li><li><a href='#answer_1_2_3_4_5'>Answer</a></li></ul></li><li><a href='#197-rising-temperature'>197. Rising Temperature</a><ul><li><a href='#question_1_2_3_4_5_6'>Question</a></li><li><a href='#answer_1_2_3_4_5_6'>Answer</a></li></ul></li><li><a href='#184-department-highest-salary'>184. Department Highest Salary</a><ul><li><a href='#question_1_2_3_4_5_6_7'>Question</a></li><li><a href='#answer_1_2_3_4_5_6_7'>Answer</a></li></ul></li><li><a href='#262-trips-and-users'>262. Trips and Users</a><ul><li><a href='#question_1_2_3_4_5_6_7_8'>Question</a></li><li><a href='#answer_1_2_3_4_5_6_7_8'>Answer</a></li></ul></li>
                        <li><a href="#content-comments">评论</a></li>
                    </ul>
                </div>
            </div>
            <div id="niu2-toolbar">
                <ul class="list-unstyled">
                    <li><a id="niu2-toolbar-ctrlsidebar" href="#" title="隐藏侧边栏"><i class="icon-3x icon-hide-sidebar"></i></a></li>
                    <li><a id="niu2-toolbar-revhistory" href="#" title="修订历史"><i class="icon-3x icon-clock-o"></i></a></li>
                    <li><a id="niu2-toolbar-viewsource" href="#" title="查看源文件"><i class="icon-file-text-o" style="font-size:2.65em;margin-top:2px;"></i></a></li>
                </ul>
                <div id="niu2-toolbar-showsidebar" data-title="显示侧边栏"></div>
                <div id="niu2-toolbar-github" data-repo="pyxuweitao/MSZ_YCL"></div>
                <div id="niu2-toolbar-bitbucket" data-repo=""></div>
            </div>
        </div>

        <div class="niu2-footer">
            <div id="body-footer" class="col-md-6 col-md-offset-2">
                <hr/>
                <p>
                    Powered by <a href="https://github.com/getpelican/pelican">Pelican</a>, 
                    主题原版是<a href="https://github.com/mawenbao/niu-x2-sidebar">niu-x2-sidebar</a>,按个人喜好稍作更改。
                </p>
                <p>
                    ©
                            2015-2016
                    <a class="niu2-footer-link" href="">徐维涛</a>
                </p>
                <p class="niu2-icons">
                    <a class="niu2-footer-icon" href="mailto: xuweitao.py@hotmail.com" title="my email address">
                        <i class="icon-envelop icon-lg"></i>
                    </a>
                    <a class="niu2-footer-icon" href="https://github.com/pyxuweitao" title="my github page">
                        <i class="icon-github icon-lg"></i>
                    </a>
                </p>
            </div>
        </div>

        <script type="text/javascript">
            var _gaq=_gaq||[];
            _gaq.push(["_setAccount","UA-72304978-1"]);
            _gaq.push(["_trackPageview"]);
            (function(){
                var b=document.createElement("script");
                b.type="text/javascript";
                b.async=true;
                b.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";
                var a=document.getElementsByTagName("script")[0];
                a.parentNode.insertBefore(b,a)
            })();
        </script>
        <div id="niu2-pygments" data-theme="murphy"></div>
        <script type="text/javascript" src="/theme/js/jquery-1.11.0.min.js"></script>
        <script type="text/javascript" src="/theme/js/niu2.min.js"></script>
        <script type="text/javascript" src="/theme/js/bootstrap.min.js"></script>
        <script type="text/javascript">
            onContentLoaded();
        </script>
    </body>
</html>